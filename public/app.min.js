(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){var objectProto=Object.prototype;var toString=objectProto.toString;var reNative=RegExp("^"+String(toString).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");function isNative(value){return typeof value=="function"&&reNative.test(value)}module.exports=isNative},{}],2:[function(require,module,exports){var objectTypes={boolean:false,function:true,object:true,number:false,string:false,undefined:false};module.exports=objectTypes},{}],3:[function(require,module,exports){var objectTypes=require("lodash._objecttypes");var objectProto=Object.prototype;var hasOwnProperty=objectProto.hasOwnProperty;var shimKeys=function(object){var index,iterable=object,result=[];if(!iterable)return result;if(!objectTypes[typeof object])return result;for(index in iterable){if(hasOwnProperty.call(iterable,index)){result.push(index)}}return result};module.exports=shimKeys},{"lodash._objecttypes":2}],4:[function(require,module,exports){var keys=require("lodash.keys"),objectTypes=require("lodash._objecttypes");var defaults=function(object,source,guard){var index,iterable=object,result=iterable;if(!iterable)return result;var args=arguments,argsIndex=0,argsLength=typeof guard=="number"?2:args.length;while(++argsIndex<argsLength){iterable=args[argsIndex];if(iterable&&objectTypes[typeof iterable]){var ownIndex=-1,ownProps=objectTypes[typeof iterable]&&keys(iterable),length=ownProps?ownProps.length:0;while(++ownIndex<length){index=ownProps[ownIndex];if(typeof result[index]=="undefined")result[index]=iterable[index]}}}return result};module.exports=defaults},{"lodash._objecttypes":2,"lodash.keys":6}],5:[function(require,module,exports){var objectTypes=require("lodash._objecttypes");function isObject(value){return!!(value&&objectTypes[typeof value])}module.exports=isObject},{"lodash._objecttypes":2}],6:[function(require,module,exports){var isNative=require("lodash._isnative"),isObject=require("lodash.isobject"),shimKeys=require("lodash._shimkeys");var nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys;var keys=!nativeKeys?shimKeys:function(object){if(!isObject(object)){return[]}return nativeKeys(object)};module.exports=keys},{"lodash._isnative":1,"lodash._shimkeys":3,"lodash.isobject":5}],7:[function(require,module,exports){var Streamer=require("./lib/streamer");var Recorder=require("./lib/recorder");module.exports=function(config){"use strict";document.createElement("canvas");var streamer=new Streamer(config);var recorder=new Recorder(config);var preview=document.getElementById("video-preview");this.startVideo=function(callback){streamer.startVideo(function(err,data){if(err){callback(err)}else{streamer.video=data.videoElement;streamer.video.width=data.videoElement.width;streamer.video.height=data.videoElement.height;preview.appendChild(streamer.video);streamer.video.play();callback()}})};this.recordVideo=function(callback){recorder.video=streamer.video;recorder.getScreenshot(function(){callback(null,recorder.videoFrames)})};this.changeCamera=function(callback){preview.innerHTML="";streamer.stopVideo();recorder.video=null;this.startVideo(callback)}}},{"./lib/recorder":9,"./lib/streamer":10}],8:[function(require,module,exports){module.exports=function(msg){var debugMsg=document.getElementById("debug-msg");if(debugMsg){debugMsg.textContent=msg}}},{}],9:[function(require,module,exports){var debug=require("./debug");var defaults=require("lodash.defaults");module.exports=function(options){"use strict";this.videoFrames=[];defaults(options,{type:"image/jpeg",frames:10,interval:200,quality:.4});var interval=options.interval;var pendingFrames=options.frames;var type=options.type;var quality=options.quality;var canvas=document.createElement("canvas");var img=document.createElement("img");var self=this;var captureFrame=function(pendingFrames,callback){canvas.getContext("2d").drawImage(self.video,0,0,canvas.width,canvas.height);img.src=canvas.toDataURL(type,quality);var saveFrame=function(){pendingFrames--;debug(pendingFrames);self.videoFrames.push(img.src);captureFrame(pendingFrames,callback)};if(pendingFrames>0){setTimeout(saveFrame,interval);return}debug("");callback(true);self.videoFrames=[]};this.getScreenshot=function(callback){this.videoFrames=[];if(this.video){canvas.width=this.video.width;canvas.height=this.video.height;captureFrame(pendingFrames,callback)}}}},{"./debug":8,"lodash.defaults":4}],10:[function(require,module,exports){var defaults=require("lodash.defaults");var setUrl=function(){window.url=window.URL||window.webkitURL||window.mozURL||window.msURL};var setNav=function(){navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia};module.exports=function(options){"use strict";defaults(options,{width:320,height:180});var width=options.width;var height=options.height;var self=this;setUrl();setNav();function streamMedia(callback){navigator.getMedia({audio:false,video:{optional:[{minHeight:height},{maxHeight:height},{minWidth:width},{maxWidth:width}]}},function(stream){if(self.videoElement.mozSrcObject){self.videoElement.mozSrcObject=stream}else{self.videoElement.src=window.url.createObjectURL(stream)}self.videoElement.play();callback(null,stream)},function(err){callback(err)})}function startStreaming(callback){var attempts=0;self.videoElement=document.createElement("video");self.videoElement.autoplay=true;var streaming=false;self.videoElement.addEventListener("canplay",function(ev){if(!streaming){self.videoElement.setAttribute("width",width);self.videoElement.setAttribute("height",height);streaming=true}},false);streamMedia(callback)}this.startVideo=function(callback){if(navigator.getMedia){startStreaming(function(err,stream){if(err){callback(err)}else{self.cameraStream=stream;self.video=self.videoElement;callback(null,{stream:self.stream,videoElement:self.video})}})}else{callback(new Error("Could not stream video"))}};this.stopVideo=function(){if(this.cameraStream){this.cameraStream.stop()}if(this.video){this.video.pause();this.video.src=null;this.video=null}}}},{"lodash.defaults":4}],11:[function(require,module,exports){var Webrtc2images=require("webrtc2images");var rtc2images=new Webrtc2images({width:320,height:320,frames:20,type:"image/jpeg",quality:1,interval:100});rtc2images.startVideo(function(err){if(err){console.log(err)}});var button=document.getElementById("record");button.onclick=function(){rtc2images.recordVideo(function(err,frames){console.log(frames)})}},{webrtc2images:7}]},{},[11]);